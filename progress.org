#+CATEGORY: cgrlib
* cgrlib progress
* ---------------------------- Dated notes -----------------------------
* <2013-11-17 Sun> Created this document
* ----------------------------- TODO list ------------------------------
* cgr-cal script
** TODO Config file should specify which voltage to ask for
** DONE Calibration dates need to be added to caldict
   - caldict members _caldate should be added for each calibration
     coefficient.  For example, since there's a chA_1x_offset member,
     there should be a chA_1x_offset_caldate member.  If the member
     has never been calibrated, the caldate should be 'none'.  When
     the calibration coefficient is used, there should be a warning
     that the coefficient has never been updated from its default
     value.
** TODO There should be a file to keep last port
   - Should have the last port connected to.  This could be something
     like cgr-session.pkl.
** TODO Custom serial port list should be added to config
** DONE cal file should be set in config file
   - Right now it's specified in the utils.py file.  Its name is cgrcal.pkl.
** DONE utils.load_cal() should take a filename
** DONE trigdict needs to be set manually for calibration
   - Trigger source needs to be manual, and points needs to be set to
     whatever -- 500.  This should be pulled out of the configuration
     file.
** DONE get_offsets function should just get offsets specified by cfg
   - Right now the function runs through both gain settings.  I think
     a better way is to only use the gain setting set in the config
     file.  
* cgr-capture script
** DONE Calibration factor dates must be checked when used
   - If the dates are 'none' or more than a year apart, a warning
     should be raised.  See the caldict_default dictionary in utils.py
     for a list of all calibration factors and their associated dates.
   - I started doing this with get_cal_data() from utils.py.  This
     needs to be extended to the remaining calibration factors.
** TODO There should be a file to keep last port
   - Should have the last port connected to.  This could be something
     like cgr-session.pkl.
** TODO Custom serial port list should be added to the config
** DONE Cal file should be set in the config file
** DONE One command-line argument should be init file
   - The default should be cgr-capture.cfg, but it should accept
     alternates.
** DONE Check to see that averaging works
